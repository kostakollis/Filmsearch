!function(){"use strict";angular.module("webapp",["ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","ui.bootstrap","frapontillo.bootstrap-switch","chart.js"])}(),function(){"use strict";function a(a){function i(i){return a.get("http://localhost:8080/api/film/get/title/"+i).then(function(a){return a.data})}function l(i){return a.get("http://localhost:8080/api/person/get/name/"+i).then(function(a){return a.data})}function n(i){return a.get("http://localhost:8080/api/search/year/get",{params:{year:i}}).then(function(a){return a.data})}function e(i,l){return a.get("http://localhost:8080/api/search/year/range",{params:{from:i,to:l}}).then(function(a){return a.data})}var t={getFilms:i,getActors:l,getFilmsByYear:n,getFilmsInRange:e};return t}a.$inject=["$http"],angular.module("webapp").factory("main",a)}(),function(){"use strict";function a(a){function i(){return t.searchInput?(delete t.films,delete t.actors,void(t.searchType?a.getFilms(t.searchInput).then(function(a){t.films=a}):a.getActors(t.searchInput).then(function(a){t.actors=a}))):!1}function l(){delete t.films,delete t.actors,t.range1&&t.range2&&a.getFilmsInRange(t.range1,t.range2).then(function(a){t.films=[],angular.forEach(a,function(a){t.films=t.films.concat(a.filmDTOs)})}),t.year&&a.getFilmsByYear(t.year).then(function(a){t.films=a.filmDTOs,console.log(t.films)})}function n(){t.searchByYear=!t.searchByYear}function e(){t.year="",t.range1="",t.range2="",t.searchInRange=!t.searchInRange}var t=this;t.searchType=!0,t.searchByYear=!1,t.searchInRange=!1,t.getListData=i,t.getListDataByYear=l,t.toggleSearch=n,t.toggleInRange=e}a.$inject=["main"],angular.module("webapp").controller("mainController",a)}(),function(){"use strict";function a(){function a(a,i,l){a.isCollapsed=!1}var i={templateUrl:"app/films/films.html",restrict:"AE",scope:{film:"="},link:a};return i}angular.module("webapp").directive("films",a)}(),function(){"use strict";function a(a){function i(i,l,n){i.isCollapsed=!1,i.open=function(){a.open({templateUrl:"app/actors/actorFilms.html",controller:"actorFilms",controllerAs:"films",resolve:{films:function(){return i.actor.filmDTOs}}})}}var l={templateUrl:"app/actors/actors.html",restrict:"AE",scope:{actor:"="},link:i};return l}a.$inject=["$modal"],angular.module("webapp").directive("actors",a)}(),function(){"use strict";function a(a,i){var l=this;l.years=[],l.ratings=[],angular.forEach(i,function(a,i){-1!==l.years.indexOf(a.year)?l.ratings[l.years.indexOf(a.year)]=(l.ratings[l.years.indexOf(a.year)]+a.imdbRating)/2:(l.years.push(a.year),l.ratings.push(a.imdbRating))}),l.ok=function(){a.close()},l.cancel=function(){a.dismiss("cancel")}}a.$inject=["$modalInstance","films"],angular.module("webapp").controller("actorFilms",a)}(),function(){"use strict";function a(a,i){a.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"mainController",controllerAs:"main"}),i.otherwise("/")}a.$inject=["$stateProvider","$urlRouterProvider"],angular.module("webapp").config(a)}(),angular.module("webapp").run(["$templateCache",function(a){a.put("app/actors/actorFilms.html",'<div class="modal-header"><button type="button" class="close" ng-click="films.cancel()"><span aria-hidden="true">&times;</span></button><h3 class="modal-title">Films chart</h3></div><div class="modal-body text-center"><canvas id="line" class="chart chart-line" chart-data="[films.ratings]" chart-labels="films.years" chart-legend="false"></canvas></div>'),a.put("app/actors/actors.html",'<div class="panel-group" ng-if="actor"><div class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><a role="button" ng-click="actor.isCollapsed = !actor.isCollapsed" ng-bind="actor.name"></a></h4></div><div collapse="actor.isCollapsed" class="panel-collapse collapse in"><div class="panel-body panel-actor"><button class="btn btn-default graph" ng-click="open()">Films chart</button><div class="row form-group"><div class="col-xs-2"><img ng-src="{{(actor.photo === \'null\') ? \'http://www.expogr.com/uploads/no_image.jpg\' : actor.photo}}" class="img-responsive img-thumbnail actor-photo"></div><div class="col-xs-10"><div class="form-group"><label>Name:</label> <span ng-bind="actor.name"></span></div><div class="form-group"><label>Occupation:</label> <span ng-repeat="occupation in actor.occupation track by $index">{{occupation}}{{$last ? \'\' : \', \'}}</span></div><div class="form-group"><label>Biography:</label> <span ng-bind="actor.bio"></span></div></div></div><div ng-repeat="item in actor.filmDTOs track by $index"><films film="item"></films></div></div></div></div></div>'),a.put("app/films/films.html",'<div class="panel-group" ng-if="film"><div class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><a role="button" ng-click="film.isCollapsed = !film.isCollapsed" ng-bind="film.title"></a></h4></div><div collapse="film.isCollapsed" class="panel-collapse collapse in"><div class="panel-body"><div class="row"><div class="col-xs-2"><img ng-src="{{(film.poster === \'null\') ? \'http://www.expogr.com/uploads/no_image.jpg\' : film.poster}}" class="img-responsive img-thumbnail film-image"></div><div class="col-xs-10"><div class="row"><div class="col-xs-4"><div class="form-group" ng-if="film.imdbID"><label>IMDB ID:</label> <span>{{film.imdbID}}</span></div><div class="form-group" ng-if="film.imdbRating"><label>IMDB rating:</label> <span>{{film.imdbRating}}</span></div><div class="form-group" ng-if="film.imdbVotes"><label>IMDB votes:</label> <span>{{film.imdbVotes}}</span></div><div class="form-group" ng-if="film.language"><label>Language:</label> <span>{{film.language}}</span></div><div class="form-group" ng-if="film.plot"><label>Plot:</label> <span>{{film.plot}}</span></div></div><div class="col-xs-4"><div class="form-group" ng-if="film.actors"><label>Actors:</label> <span ng-repeat="actor in film.actors track by $index">{{actor}}{{$last ? \'\' : \', \'}}</span></div><div class="form-group" ng-if="film.awards"><label>Awards:</label> <span ng-repeat="award in film.awards track by $index">{{award}}{{$last ? \'\' : \', \'}}</span></div><div class="form-group" ng-if="film.country"><label>Country:</label> <span>{{film.country}}</span></div><div class="form-group" ng-if="film.director"><label>Director:</label> <span ng-repeat="director in film.director track by $index">{{director}}{{$last ? \'\' : \', \'}}</span></div><div class="form-group" ng-if="film.genres"><label>Genres:</label> <span ng-repeat="genre in film.genres track by $index">{{genre}}{{$last ? \'\' : \', \'}}</span></div></div><div class="col-xs-4"><div class="form-group" ng-if="film.rated"><label>Rated:</label> <span><input type="checkbox" ng-model="film.rated" onclick="return false"></span></div><div class="form-group" ng-if="film.released"><label>Released:</label> <span>{{film.released}}</span></div><div class="form-group" ng-if="film.runtime"><label>Run-time:</label> <span>{{film.runtime}}</span></div><div class="form-group" ng-if="film.type"><label>Type:</label> <span>{{film.type}}</span></div><div class="form-group" ng-if="film.year"><label>Year:</label> <span>{{film.year}}</span></div></div></div></div></div></div></div></div></div>'),a.put("app/main/main.html",'<div class="container"><div class="row form-group search-input"><div class="col-xs-9"><div class="input-group" ng-if="!main.searchByYear"><span class="input-group-btn"><button class="btn btn-default" type="button"><i class="glyphicon glyphicon-search" ng-click="main.getListData()"></i></button></span> <input class="form-control" type="text" placeholder="e.g. \'Yelp\', \'Avicii\', or \'Gravity\'" ng-model="main.searchInput"></div><div ng-if="main.searchByYear"><div class="form-inline"><div class="pull-right"><button class="btn btn-default" type="button" ng-click="main.toggleInRange()" ng-bind="main.searchInRange ? \'by year\' : \'in range\'"></button></div><div class="pull-right year" ng-if="!main.searchInRange"><label class="control-label">Year:</label> <input class="form-control" type="text" ng-model="main.year"></div><div class="pull-right range2" ng-if="main.searchInRange"><label class="control-label">To:</label> <input class="form-control" type="text" ng-model="main.range2"></div><div class="pull-right range1" ng-if="main.searchInRange"><label class="control-label">From:</label> <input class="form-control" type="text" ng-model="main.range1"></div><div class="pull-right search-button"><button class="btn btn-default" type="button" ng-click="main.getListDataByYear()"><i class="glyphicon glyphicon-search"></i> Search</button></div></div></div></div><div class="col-xs-1"><button type="button" class="btn btn-default" ng-click="main.toggleSearch()" ng-bind="main.searchByYear ? \'by name\' : \'by year\'"></button></div><div class="col-xs-2"><input bs-switch="" ng-model="main.searchType" type="checkbox" switch-on-text="Films" switch-off-text="Actors" switch-on-color="primary" switch-off-color="success"></div></div><div ng-if="main.searchType && main.films && !main.year && !main.range1"><films film="main.films"></films></div><div ng-repeat="item in main.films track by $index" ng-if="main.films && (main.year || main.range1)"><films film="item"></films></div><div ng-if="!main.searchType && main.actors"><actors actor="main.actors"></actors></div></div>')}]);